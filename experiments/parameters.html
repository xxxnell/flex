<html><head><title>Flip: Performance on Parameters</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Flip contributors" /><meta name="description" content="Fast and lightweight probability tools for a dataset and a data stream" /><meta name="og:image" content="/flip/img/poster.png" /><meta name="og:title" content="Flip: Performance on Parameters" /><meta name="og:site_name" content="Flip" /><meta name="og:url" content="" /><meta name="og:type" content="website" /><meta name="og:description" content="Fast and lightweight probability tools for a dataset and a data stream" /><link rel="icon" type="image/png" href="/flip/img/favicon.png" /><meta name="twitter:title" content="Flip: Performance on Parameters" /><meta name="twitter:image" content="img/poster.png" /><meta name="twitter:description" content="Fast and lightweight probability tools for a dataset and a data stream" /><meta name="twitter:card" content="summary_large_image" /><meta name="twitter:creator" content="@xxxnell" /><link rel="icon" type="image/png" sizes="16x16" href="/flip/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/flip/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/flip/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/flip/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/flip/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/flip/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/flip/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/flip/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/flip/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/flip/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/flip/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/flip/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/flip/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/flip/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/flip/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/flip/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/flip/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/flip/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/flip/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/flip/img/favicon310x150.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/flip/highlight/styles/atom-one-light.css" /><link rel="stylesheet" href="/flip/css/style.css" /><link rel="stylesheet" href="/flip/css/palette.css" /><link rel="stylesheet" href="/flip/css/codemirror.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><ul id="sidebar" class="sidebar-nav"><li class="sidebar-brand"><a href="/flip/" class="brand"><div class="brand-wrapper"><span>Flip</span></div></a></li>    <li><a href="/flip/experiments/" class="">Experiments</a></li> <li><a href="/flip/experiments/parameters.html" class=" active ">Performance on Parameters</a></li> <li><a href="/flip/experiments/benchmark.html" class="">Benchmark</a></li> <li><a href="/flip/experiments/accuracy.html" class="">Accuracy on Data Streams</a> <ul class="sub_section"> <li><a href="/flip/experiments/accuracyonstat.html" class="">Stationary Case</a></li> <li><a href="/flip/experiments/accuracyonnonstat.html" class="">Non-stationary Case</a></li></ul></li></ul></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li id="gh-eyes-item" class="hidden-xs"><a href="https://github.com/xxxnell/flip"><i class="fa fa-eye"></i><span>WATCH<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs"><a href="https://github.com/xxxnell/flip"><i class="fa fa-star-o"></i><span>STARS<span id="stars" class="label label-default">--</span></span></a></li><li><a href="#" onclick="shareSiteTwitter('Flip Fast and lightweight probability tools for a dataset and a data stream');"><i class="fa fa-twitter"></i></a></li><li><a href="#" onclick="shareSiteFacebook('Flip Fast and lightweight probability tools for a dataset and a data stream');"><i class="fa fa-facebook"></i></a></li><li><a href="#" onclick="shareSiteGoogle();"><i class="fa fa-google-plus"></i></a></li></ul></div></div></div></div><div id="content" data-github-owner="xxxnell" data-github-repo="flip"><div class="content-wrapper"><section>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/javascript" charset="utf-8" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

<script type="text/javascript" charset="utf-8" src="https://vincenttam.github.io/javascripts/MathJaxLocal.js">
</script>

<h1 id="performance-on-parameters">Performance on Parameters</h1>

<p>When the <code class="highlighter-rouge">Sketch</code> framework estimates the PDF for
stationary and non-stationary data streams, appropriate parameters
should be selected to achieve high update speed and accuracy with only a
small amount of memory. Our experiment demonstrates that it is
advantageous to set parameters so that they are analogous to traditional
density estimation models as best as possible when estimating stationary
data streams. Furthermore, our experiment shows that there is a
trade-off between the accuracy and update speed when selecting
parameters for estimating non-stationary data streams.</p>

<p>In this experiment, we observed the change in the three key metrics of
<code class="highlighter-rouge">Sketch</code>—throughput of the <code class="highlighter-rouge">update</code>
operation, statistical distance, and memory usage—when its parameters
are modified. There are two types of synthetic data streams used for the
density estimation. One is a stationary data stream of normal
distribution $\mathcal{N}(0, 1)$ and the other is a non-stationary data
stream whose mean constantly moves, i.e., $\mathcal{N}(v_1 \cdot t, 1)$
where $v_1 = 0.01$. The range of parameters in this experiments are as
follows: from 2 to 10 for <code class="highlighter-rouge">cmapNo</code>, from 10 to 150 for
<code class="highlighter-rouge">thresholdPeriod</code>, from 0.2 to 3.0 for <code class="highlighter-rouge">decayFactor</code>, and from 0.01 to
2.3 for <code class="highlighter-rouge">rebuildThreshold</code>.</p>

<p align="center">
<img src="/flip/img/experiments/conf/normal-conf.png" alt="infographic" style="max-width: 400px; width: 100%;" />
<img src="/flip/img/experiments/conf/incr-drift-conf.png" alt="infographic" style="max-width: 400px; width: 100%;" />
</p>

<p>The <em>performance diagram</em> is defined as the three-dimensional representation of key metrics for <code class="highlighter-rouge">Sketch</code> over various parameters. First in the diagrams above show the performance diagrams for the stationary and non-stationary data streams of <code class="highlighter-rouge">Sketch</code> respectively. These diagrams demonstrate the throughput, statistical distance and memory usage that can be achieved by <code class="highlighter-rouge">Sketch</code> in each type of data stream. As the algorithm has better performance, the displayed area in the diagrams is shifted to the upper left. Second in the diagrams above shows that <code class="highlighter-rouge">Sketch</code> can achieve low statistical distance and high throughput at the same time using a small amount of memory if it estimates a stationary distribution. Figure 3b indicates that there is a trade-off between high accuracy and throughput when <code class="highlighter-rouge">Sketch</code> estimates a non-stationary data stream. Furthermore, in a non-stationary case, more memory usage is required to achieve the same throughput and accuracy as in a stationary case. When concept drift occurs, the performance diagram is distorted in a diamond shape, which indicates that overall performance is degraded.</p>

<p>The <em>performance trend</em> is the trajectory arrows changing each parameter at a time while the others remain fixed. show the performance trends added on each performance diagram. In the figures, the longer the arrow, the more the performance changes. If the arrows are down right, the statistical distance increases and the throughput decreases as the parameters increase, which indicates that the performance of <code class="highlighter-rouge">Sketch</code> degrades in all respects. On the other hand, if the arrows are up right, it indicates that the statistical distance increases and the throughput increases as the parameters increase, thus being in a trade-off relationship. The up left arrow and the down left arrow are the opposite.</p>

<h2 id="stationary-case">Stationary Case</h2>

<p align="center">
<p align="center">
<img src="/flip/img/experiments/conf/normal-cmapno.png" alt="infographic" style="max-width: 400px; width: 100%;" />
<img src="/flip/img/experiments/conf/normal-cmapsize.png" alt="infographic" style="max-width: 400px; width: 100%;" />
</p>
<p align="center">
<img src="/flip/img/experiments/conf/normal-buffersize.png" alt="infographic" style="max-width: 400px; width: 100%;" />
<img src="/flip/img/experiments/conf/normal-rebuildth.png" alt="infographic" style="max-width: 400px; width: 100%;" />
</p>
</p>

<ul>
  <li><code class="highlighter-rouge">cmapNo</code>: First in the diagrams above shows the performance trends for <code class="highlighter-rouge">cmapNo</code>. These treands are downward arrows. They indicate that the statistical distance does not change and the thoughput decreases as <code class="highlighter-rouge">cmapNo</code> increases.</li>
  <li><code class="highlighter-rouge">thresholdPeriod</code>: Second in the diagrams above shows the performance trends for <code class="highlighter-rouge">thresholdPeriod</code>. These trends are left upward arrows. They indicate that the statistical distance decreases and the throughput increases as <code class="highlighter-rouge">thresholdPeriod</code> increases. This is because the [Diagnose]{.smallcaps} is
performed more rarely.</li>
  <li><code class="highlighter-rouge">decayFactor</code>: Third in the diagrams above shows the performance trends for <code class="highlighter-rouge">decayFactor</code>. These trends are very short, random arrows. They indicate that the key metrics of <code class="highlighter-rouge">Sketch</code> are not affected by <code class="highlighter-rouge">decayFactor</code>.</li>
  <li><code class="highlighter-rouge">rebuildThreshold</code>:Fourth in the diagrams above shows the performance trends for <code class="highlighter-rouge">rebuildThreshold</code>. These trends are right downward arrows. They indicate that the throughout increases and the statistical distance decreases as <code class="highlighter-rouge">rebuildThreshold</code> increases, owing to the same reason of <code class="highlighter-rouge">thresholdPeriod</code>.</li>
</ul>

<p>In conclusion, it is advantageous to select <code class="highlighter-rouge">thresholdPeriod</code> and <code class="highlighter-rouge">rebuildThreshold</code> as large as possible to increase the throughput and decrease the statistical distance. <code class="highlighter-rouge">cmapNo</code> should be as small as possible. <code class="highlighter-rouge">decayFactor</code> had no influence on the results.</p>

<p>In evaluating the performance of the parameters, one must consider the stability of the estimated PDF when outliers occur as these diagrams use the mean statistical distance. If <code class="highlighter-rouge">cmapNo</code> is less than 3 or <code class="highlighter-rouge">rebuildThreshold</code> is less than 2.5, the statistical distance increases temporarily when an outlier accidentally occurs.</p>

<p>These results demonstrate that the use of solely the <code class="highlighter-rouge">update</code> operation, as in the traditional approach, is advantageous to the performance of estimation for a stationary data stream. If <code class="highlighter-rouge">thresholdPeriod</code> and <code class="highlighter-rouge">rebuildThreshold</code> are small, the <code class="highlighter-rouge">majorUpdate</code> operation is performed frequently. The <code class="highlighter-rouge">majorUpdate</code> operation adds a model representing the latest data stream to the data structure of <code class="highlighter-rouge">Sketch</code>. Consequently, the PDF estimated using <code class="highlighter-rouge">Sketch</code> is strongly dependent on the latest data, and its accuracy is compromised when estimating the distribution of a stationary data stream.</p>

<h2 id="non-stationary-case">Non-stationary Case</h2>

<p align="center">
<p align="center">
<img src="/flip/img/experiments/conf/incr-drift-cmapno.png" alt="infographic" style="max-width: 400px; width: 100%;" />
<img src="/flip/img/experiments/conf/incr-drift-cmapsize.png" alt="infographic" style="max-width: 400px; width: 100%;" />
</p>
<p align="center">
<img src="/flip/img/experiments/conf/incr-drift-buffersize.png" alt="infographic" style="max-width: 400px; width: 100%;" />
<img src="/flip/img/experiments/conf/incr-drift-rebuildth.png" alt="infographic" style="max-width: 400px; width: 100%;" />
</p>
</p>

<ul>
  <li><code class="highlighter-rouge">cmapNo</code>: First in the diagrams above shows the performance trends for <code class="highlighter-rouge">cmapNo</code>. These trends are downward arrows. They indicate that the statistical distance increases and the throughput decreases as <code class="highlighter-rouge">cmapNo</code> increases.</li>
  <li><code class="highlighter-rouge">thresholdPeriod</code>: Second in the diagrams above shows the performance trends for <code class="highlighter-rouge">thresholdPeriod</code>. These trends are left upward arrows. They indicate that both the statistical distance and throughput increase as the <code class="highlighter-rouge">thresholdPeriod</code> increases. This is because the [Diagnose]{.smallcaps} and <code class="highlighter-rouge">majorUpdate</code> operation are performed more frequently.</li>
  <li><code class="highlighter-rouge">decayFactor</code>: Third in the diagrams above shows the performance trends for <code class="highlighter-rouge">decayFactor</code>. These trends are leftward arrows. They indicate that the statistical distance decreases as <code class="highlighter-rouge">decayFactor</code> increases.</li>
  <li><code class="highlighter-rouge">thresholdPeriod</code>: Fourth in the diagrams above shows the performance trends for <code class="highlighter-rouge">rebuildThreshold</code>. These trends are right upward arrows. They indicate that both the statistical distance and throughput increase as <code class="highlighter-rouge">rebuildThreshold</code> increases, owing to the same reason of <code class="highlighter-rouge">thresholdPeriod</code>.</li>
</ul>

<p>In conclusion, for the selection of <code class="highlighter-rouge">thresholdPeriod</code> and <code class="highlighter-rouge">rebuildThreshold</code>, there is a trade-off between the statistical distance and throughput. <code class="highlighter-rouge">cmapNo</code> and <code class="highlighter-rouge">decayFactor</code> should be as small as possible.</p>

<p>This result is the opposite of the stationary case, and this indicates that, when the data stream is non-stationary, performing the <code class="highlighter-rouge">update</code> operation consisting of two different update operations (i.e., <code class="highlighter-rouge">minorUpdate</code> and <code class="highlighter-rouge">majorUpdate</code>) helps to improve its accuracy. This is because, with a smaller <code class="highlighter-rouge">thresholdPeriod</code> and <code class="highlighter-rouge">rebuildThreshold</code>, the use of two update operations has a significant influence on the accuracy.</p>

<h2 id="selection-rule">Selection Rule</h2>

<p>To perform density estimation with high throughput and accuracy for both stationary and non-stationary data streams, parameters should be selected to satisfy the following rules based on the results of the above experiments.</p>

<ul>
  <li><code class="highlighter-rouge">cmapNo</code>: 3 is the optimal value. We choose the smallest value so long as the value is not so small that the model happens to have an excessively high statistical distance accidentally.</li>
  <li><code class="highlighter-rouge">thresholdPeriod</code>: We choose the largest value within the range that satisfies the requirements of accuracy and memory usage. The allowed range of <code class="highlighter-rouge">thresholdPeriod</code> should be determined experimentally. In all experiments, we select 30.</li>
  <li><code class="highlighter-rouge">decayFactor</code>: 2.5 is the optimal value. We choose the highest value so long as the value is not so high that the model happens to have an excessively high statistical distance accidentally.</li>
  <li><code class="highlighter-rouge">thresholdPeriod</code>: We choose the largest value within the range that satisfies the requirements of accuracy and memory usage. The range of <code class="highlighter-rouge">rebuildThreshold</code> should be determined experimentally. In all experiments, we select 0.4.</li>
</ul>

</section></div></div></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/flip/highlight/highlight.pack.js"></script><script>hljs.configure({languages:['scala','java','bash']});
hljs.initHighlighting();
              </script><script src="/flip/js/main.js"></script></body></html>